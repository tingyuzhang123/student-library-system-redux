{"ast":null,"code":"import _defineProperty from \"/Users/zhangtingyu/booksystem-redux/student-library-system-redux/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { SHOW_STUDENT_LIST, RETURN_BOOKS, SUBMIT_BOOKS } from './actionsCreator';\nconst initState = {\n  student: {\n    'Fiona': {},\n    'Frank': {},\n    'Eric': {},\n    'Jane': {}\n  },\n  selectedStudent: null,\n  bookNumbers: {\n    'book1': 5,\n    'book2': 7,\n    'book3': 9,\n    'book4': 3,\n    'book5': 1\n  },\n  isSelected: false,\n  isShowedBookList: false\n};\nexport const reducer = (state = initState, action) => {\n  const student = state.student,\n        selectedStudent = state.selectedStudent,\n        bookNumbers = state.bookNumbers;\n\n  switch (action.type) {\n    case SHOW_STUDENT_LIST:\n      const studentName = action.studentName;\n      return _objectSpread({}, state, {\n        selectedStudent: studentName,\n        isSelected: true\n      });\n\n    case SUBMIT_BOOKS:\n      const tempBookSelect = action.tempBookSelect;\n      Object.keys(tempBookSelect).map(bookName => {\n        const bookSelected = tempBookSelect[bookName];\n\n        if (bookSelected) {\n          if (student[selectedStudent][bookName] === undefined) {\n            student[selectedStudent][bookName] = false;\n          }\n\n          student[selectedStudent][bookName] = true;\n          bookNumbers[bookName]--;\n        }\n      });\n      return {\n        student,\n        bookNumbers\n      };\n\n    case RETURN_BOOKS:\n      const bookName = action.bookName;\n      student[selectedStudent][bookName] = false;\n      bookNumbers[bookName]++;\n      return {\n        student,\n        bookNumbers\n      };\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["/Users/zhangtingyu/booksystem-redux/student-library-system-redux/src/bookSystem/systemReducer/reducer.js"],"names":["SHOW_STUDENT_LIST","RETURN_BOOKS","SUBMIT_BOOKS","initState","student","selectedStudent","bookNumbers","isSelected","isShowedBookList","reducer","state","action","type","studentName","tempBookSelect","Object","keys","map","bookName","bookSelected","undefined"],"mappings":";;;;;;AAAA,SAAQA,iBAAR,EAA2BC,YAA3B,EAAwCC,YAAxC,QAA2D,kBAA3D;AACA,MAAMC,SAAS,GAAG;AACdC,EAAAA,OAAO,EAAE;AACL,aAAQ,EADH;AAEL,aAAQ,EAFH;AAGL,YAAO,EAHF;AAIL,YAAO;AAJF,GADK;AAOZC,EAAAA,eAAe,EAAC,IAPJ;AAQZC,EAAAA,WAAW,EAAE;AACX,aAAS,CADE;AAEX,aAAS,CAFE;AAGX,aAAS,CAHE;AAIX,aAAS,CAJE;AAKX,aAAS;AALE,GARD;AAeZC,EAAAA,UAAU,EAAE,KAfA;AAgBZC,EAAAA,gBAAgB,EAAE;AAhBN,CAAlB;AAmBI,OAAO,MAAMC,OAAO,GAAC,CAACC,KAAK,GAACP,SAAP,EAAiBQ,MAAjB,KAA0B;AAAA,QACrCP,OADqC,GACKM,KADL,CACrCN,OADqC;AAAA,QAC5BC,eAD4B,GACKK,KADL,CAC5BL,eAD4B;AAAA,QACXC,WADW,GACKI,KADL,CACXJ,WADW;;AAE7C,UAAQK,MAAM,CAACC,IAAf;AACE,SAAKZ,iBAAL;AACE,YAAMa,WAAW,GAAGF,MAAM,CAACE,WAA3B;AACE,+BAAYH,KAAZ;AAAmBL,QAAAA,eAAe,EAAEQ,WAApC;AAAgDN,QAAAA,UAAU,EAAC;AAA3D;;AACJ,SAAKL,YAAL;AACI,YAAMY,cAAc,GAAGH,MAAM,CAACG,cAA9B;AACAC,MAAAA,MAAM,CAACC,IAAP,CAAYF,cAAZ,EAA4BG,GAA5B,CAAiCC,QAAD,IAAc;AAC5C,cAAMC,YAAY,GAAGL,cAAc,CAACI,QAAD,CAAnC;;AACA,YAAIC,YAAJ,EAAkB;AACd,cAAIf,OAAO,CAACC,eAAD,CAAP,CAAyBa,QAAzB,MAAuCE,SAA3C,EAAsD;AAClDhB,YAAAA,OAAO,CAACC,eAAD,CAAP,CAAyBa,QAAzB,IAAqC,KAArC;AACH;;AACDd,UAAAA,OAAO,CAACC,eAAD,CAAP,CAAyBa,QAAzB,IAAmC,IAAnC;AACAZ,UAAAA,WAAW,CAACY,QAAD,CAAX;AACH;AACJ,OATC;AAUA,aAAO;AAAEd,QAAAA,OAAF;AAAWE,QAAAA;AAAX,OAAP;;AACJ,SAAKL,YAAL;AACI,YAAMiB,QAAQ,GAAGP,MAAM,CAACO,QAAxB;AACAd,MAAAA,OAAO,CAACC,eAAD,CAAP,CAAyBa,QAAzB,IAAmC,KAAnC;AACAZ,MAAAA,WAAW,CAACY,QAAD,CAAX;AACA,aAAM;AACJd,QAAAA,OADI;AACKE,QAAAA;AADL,OAAN;;AAGJ;AACI,aAAOI,KAAP;AAzBN;AA2BG,CA7BE","sourcesContent":["import {SHOW_STUDENT_LIST, RETURN_BOOKS,SUBMIT_BOOKS} from './actionsCreator';\nconst initState = {\n    student: {\n        'Fiona':{},\n        'Frank':{},\n        'Eric':{},\n        'Jane':{}\n      },\n      selectedStudent:null,\n      bookNumbers: {\n        'book1': 5,\n        'book2': 7,\n        'book3': 9,\n        'book4': 3,\n        'book5': 1\n      },\n      isSelected: false,\n      isShowedBookList: false\n    };\n\n    export const reducer=(state=initState,action)=>{\n      const { student, selectedStudent, bookNumbers } = state;\n      switch (action.type) {\n        case SHOW_STUDENT_LIST:\n          const studentName = action.studentName\n            return { ...state, selectedStudent: studentName,isSelected:true};\n        case SUBMIT_BOOKS:\n            const tempBookSelect = action.tempBookSelect;\n            Object.keys(tempBookSelect).map((bookName) => {\n              const bookSelected = tempBookSelect[bookName];\n              if (bookSelected) {\n                  if (student[selectedStudent][bookName] === undefined) {\n                      student[selectedStudent][bookName] = false;\n                  }\n                  student[selectedStudent][bookName]=true;\n                  bookNumbers[bookName]--;\n              }\n          });\n            return { student, bookNumbers};\n        case RETURN_BOOKS:\n            const bookName = action.bookName;\n            student[selectedStudent][bookName]=false;\n            bookNumbers[bookName]++;\n            return{\n              student, bookNumbers\n            };\n        default:\n            return state;\n          }\n        }"]},"metadata":{},"sourceType":"module"}